<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Expert gum disease treatment and periodontal care. Free evaluation, personalized treatment plans, and comprehensive maintenance programs. Restore your gum health today.">
    <meta name="keywords" content="gum disease treatment, periodontal care, gingivitis treatment, periodontitis, scaling root planing, gum infection, dental hygiene">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Advanced Gum Disease Treatment | Modern Dental Care">
    <meta property="og:description" content="Restore your gum health with expert periodontal care. Free evaluation and personalized treatment plans.">
    <meta property="og:type" content="website">
    <link rel="canonical" href="/gum-disease-treatment">
    <title>Gum Disease Treatment - Periodontal Care Experts | Modern Dental Care</title>
    
    <style>
        /* Critical CSS optimized for performance */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --trust-blue: #0077BE;
            --clean-white: #FFFFFF;
            --accent-teal: #00A8A8;
            --soft-gray: #F5F5F5;
            --charcoal: #333333;
            --success-green: #28A745;
            --warning-red: #DC3545;
            --warning-yellow: #FFC107;
            --info-purple: #6F42C1;
            --light-blue: #E3F2FD;
            --light-red: #FFEBEE;
            --light-green: #E8F5E9;
            --shadow-light: 0 2px 10px rgba(0,0,0,0.1);
            --shadow-medium: 0 5px 20px rgba(0,0,0,0.1);
            --shadow-heavy: 0 10px 30px rgba(0,0,0,0.1);
            --border-radius: 8px;
            --border-radius-lg: 15px;
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--charcoal);
            background-color: var(--clean-white);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Skip link for accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--trust-blue);
            color: white;
            padding: 8px;
            text-decoration: none;
            z-index: 10000;
        }
        
        .skip-link:focus {
            top: 6px;
        }
        
        /* Visually hidden class for screen readers */
        .visually-hidden {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            padding: 0 !important;
            margin: -1px !important;
            overflow: hidden !important;
            clip: rect(0, 0, 0, 0) !important;
            white-space: nowrap !important;
            border: 0 !important;
        }
        
        /* Header - Performance optimized */
        header {
            background: var(--clean-white);
            box-shadow: var(--shadow-light);
            position: sticky;
            top: 0;
            z-index: 1000;
            will-change: transform;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--trust-blue);
            text-decoration: none;
        }
        
        .nav-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .cta-button {
            background: var(--success-green);
            color: var(--clean-white);
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            text-decoration: none;
            display: inline-block;
        }
        
        .cta-button:hover,
        .cta-button:focus {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
            outline: 2px solid transparent;
        }
        
        .risk-button {
            background: var(--warning-red);
            color: var(--clean-white);
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }
        
        .risk-button:hover,
        .risk-button:focus {
            background: #c82333;
            outline: 2px solid var(--warning-red);
            outline-offset: 2px;
        }
        
        /* Hero Section - Optimized loading */
        .hero {
            background: linear-gradient(135deg, var(--trust-blue), var(--accent-teal));
            color: var(--clean-white);
            padding: 4rem 5% 3rem;
            text-align: center;
            min-height: 60vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .hero h1 {
            font-size: clamp(2rem, 4vw, 2.5rem);
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease-out;
            font-weight: 700;
        }
        
        .hero p {
            font-size: clamp(1rem, 2vw, 1.2rem);
            margin-bottom: 2rem;
            opacity: 0.95;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        /* Content sections with lazy loading */
        .content-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }
        
        .content-section.loaded {
            opacity: 1;
            transform: translateY(0);
        }
        
        .section-title {
            text-align: center;
            font-size: clamp(1.5rem, 3vw, 2rem);
            color: var(--trust-blue);
            margin-bottom: 3rem;
            font-weight: 700;
        }
        
        /* Gum Disease Progression Visualizer */
        .progression-visualizer {
            padding: 4rem 5%;
            background: var(--soft-gray);
        }
        
        .visualizer-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .progression-stages {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin-bottom: 3rem;
        }
        
        .progression-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, var(--success-green), var(--warning-yellow), var(--warning-red), var(--info-purple));
            z-index: 1;
        }
        
        .stage-marker {
            width: 80px;
            height: 80px;
            background: var(--clean-white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: var(--shadow-medium);
            cursor: pointer;
            transition: var(--transition);
            z-index: 2;
            position: relative;
            border: 3px solid transparent;
        }
        
        .stage-marker:hover,
        .stage-marker:focus {
            transform: scale(1.1);
            outline: 2px solid var(--trust-blue);
            outline-offset: 4px;
        }
        
        .stage-marker.active {
            transform: scale(1.2);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border-color: var(--trust-blue);
        }
        
        .stage-info {
            background: var(--clean-white);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-heavy);
            display: none;
        }
        
        .stage-info.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        .stage-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }
        
        .stage-visual {
            background: 
                linear-gradient(45deg, #f0f0f0 25%, transparent 25%, transparent 75%, #f0f0f0 75%),
                linear-gradient(45deg, #f0f0f0 25%, transparent 25%, transparent 75%, #f0f0f0 75%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            height: 300px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--charcoal);
            font-weight: 600;
        }
        
        .stage-info h3 {
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .stage-info ul {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }
        
        .stage-info li {
            margin-bottom: 0.5rem;
        }
        
        /* Enhanced Warning Signs Checker */
        .warning-checker {
            padding: 4rem 5%;
            background: var(--clean-white);
        }
        
        .checker-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .symptom-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .symptom-category {
            background: var(--soft-gray);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            transition: var(--transition);
        }
        
        .symptom-category:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }
        
        .category-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .category-header h3 {
            color: var(--trust-blue);
            font-weight: 600;
        }
        
        .category-icon {
            font-size: 2.5rem;
        }
        
        .symptom-list {
            display: grid;
            gap: 0.8rem;
        }
        
        .symptom-item {
            background: var(--clean-white);
            padding: 1rem;
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            position: relative;
        }
        
        .symptom-item:hover,
        .symptom-item:focus {
            border-color: var(--accent-teal);
            outline: 2px solid var(--accent-teal);
            outline-offset: 2px;
        }
        
        .symptom-item.selected {
            background: var(--light-red);
            border-color: var(--warning-red);
        }
        
        .symptom-checkbox {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid var(--charcoal);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            flex-shrink: 0;
        }
        
        .symptom-item.selected .symptom-checkbox {
            background: var(--warning-red);
            border-color: var(--warning-red);
            color: var(--clean-white);
        }
        
        .symptom-results {
            text-align: center;
            margin-top: 2rem;
        }
        
        .results-display {
            background: var(--clean-white);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: var(--shadow-medium);
            margin-top: 2rem;
            display: none;
        }
        
        .risk-meter {
            width: 300px;
            height: 20px;
            background: var(--soft-gray);
            border-radius: 10px;
            margin: 2rem auto;
            overflow: hidden;
            position: relative;
        }
        
        .risk-fill {
            height: 100%;
            background: linear-gradient(to right, var(--success-green), var(--warning-yellow), var(--warning-red));
            width: 0%;
            transition: width 1s ease-out;
        }
        
        .risk-level {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .risk-low { color: var(--success-green); }
        .risk-moderate { color: var(--warning-yellow); }
        .risk-high { color: var(--warning-red); }
        
        /* Treatment Comparison Tool */
        .treatment-comparison {
            padding: 4rem 5%;
            background: var(--soft-gray);
        }
        
        .comparison-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .comparison-selector {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .comparison-option {
            padding: 0.8rem 1.5rem;
            background: var(--clean-white);
            border: 2px solid var(--soft-gray);
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .comparison-option:hover,
        .comparison-option:focus {
            border-color: var(--accent-teal);
            outline: 2px solid var(--accent-teal);
            outline-offset: 2px;
        }
        
        .comparison-option.active {
            background: var(--trust-blue);
            color: var(--clean-white);
            border-color: var(--trust-blue);
        }
        
        .treatment-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }
        
        .treatment-card {
            background: var(--clean-white);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-medium);
            transition: transform 0.3s;
            position: relative;
        }
        
        .treatment-card:hover {
            transform: translateY(-5px);
        }
        
        .treatment-card.recommended {
            border: 3px solid var(--success-green);
        }
        
        .recommended-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--success-green);
            color: var(--clean-white);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .treatment-header {
            padding: 2rem;
            color: var(--clean-white);
            text-align: center;
        }
        
        .gingivitis-header { background: var(--warning-yellow); color: var(--charcoal); }
        .periodontitis-header { background: var(--warning-red); }
        .advanced-header { background: var(--info-purple); }
        
        .treatment-content {
            padding: 2rem;
        }
        
        .treatment-content h4 {
            color: var(--trust-blue);
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .treatment-list {
            list-style: none;
            margin-top: 1rem;
        }
        
        .treatment-list li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }
        
        .treatment-list li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--success-green);
            font-weight: 700;
        }
        
        .treatment-cost {
            background: var(--light-blue);
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-top: 1rem;
            text-align: center;
        }
        
        /* CTA Section - Conversion optimized */
        .cta-section {
            background: linear-gradient(135deg, var(--trust-blue), var(--accent-teal));
            color: var(--clean-white);
            padding: 4rem 5%;
            text-align: center;
        }
        
        .cta-section h2 {
            font-size: clamp(1.5rem, 3vw, 2rem);
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .cta-section p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.95;
        }
        
        .cta-button-large {
            background: var(--success-green);
            color: var(--clean-white);
            padding: 1rem 2rem;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-block;
            box-shadow: var(--shadow-medium);
            font-weight: 600;
        }
        
        .cta-button-large:hover,
        .cta-button-large:focus {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            outline: 2px solid var(--clean-white);
            outline-offset: 2px;
        }
        
        /* Footer */
        footer {
            background: var(--charcoal);
            color: var(--clean-white);
            padding: 3rem 5%;
            text-align: center;
        }
        
        footer p {
            margin-bottom: 0.5rem;
        }
        
        /* Modal Styles - Performance optimized */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            z-index: 1900;
            backdrop-filter: blur(2px);
        }
        
        .modal-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .risk-calculator-modal {
            background: var(--clean-white);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 700px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .calculator-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .calculator-header h2 {
            color: var(--trust-blue);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }
        
        .risk-factors {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .risk-factor {
            background: var(--soft-gray);
            padding: 1.5rem;
            border-radius: 10px;
        }
        
        .risk-factor h4 {
            color: var(--charcoal);
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .risk-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.5rem;
        }
        
        .risk-option {
            padding: 0.8rem;
            background: var(--clean-white);
            border: 2px solid var(--soft-gray);
            border-radius: var(--border-radius);
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .risk-option:hover,
        .risk-option:focus {
            border-color: var(--accent-teal);
            transform: translateY(-2px);
            outline: 2px solid var(--accent-teal);
            outline-offset: 2px;
        }
        
        .risk-option.selected {
            background: var(--accent-teal);
            color: var(--clean-white);
            border-color: var(--accent-teal);
        }
        
        .calculator-result {
            text-align: center;
            padding: 2rem;
            border-radius: 10px;
            display: none;
        }
        
        .risk-score-display {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        /* Floating assessment button */
        .floating-assessment {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--warning-red);
            color: var(--clean-white);
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(220, 53, 69, 0.4);
            z-index: 1000;
            animation: pulse 2s infinite;
            border: none;
            text-decoration: none;
        }
        
        .floating-assessment:hover,
        .floating-assessment:focus {
            transform: scale(1.1);
            outline: 2px solid var(--clean-white);
            outline-offset: 2px;
        }
        
        /* Animations - GPU accelerated */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(220, 53, 69, 0);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
            }
        }
        
        /* Responsive Design - Mobile first approach */
        @media (max-width: 768px) {
            .hero {
                padding: 3rem 5% 2rem;
            }
            
            .progression-stages {
                flex-direction: column;
                gap: 2rem;
            }
            
            .progression-line {
                display: none;
            }
            
            .stage-content {
                grid-template-columns: 1fr;
            }
            
            nav {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem 5%;
            }
            
            .nav-buttons {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .comparison-selector {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .comparison-option {
                width: 100%;
                text-align: center;
            }
            
            .risk-calculator-modal {
                width: 95%;
                margin: 1rem;
            }
            
            .risk-options {
                grid-template-columns: 1fr;
            }
        }
        
        /* Print styles */
        @media print {
            .nav-buttons,
            .cta-button,
            .risk-button,
            .floating-assessment {
                display: none !important;
            }
            
            body {
                font-size: 12pt;
                line-height: 1.4;
            }
            
            .hero {
                background: none !important;
                color: black !important;
            }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .cta-button,
            .risk-button,
            .comparison-option {
                border: 2px solid currentColor;
            }
        }
    </style>
    
    <!-- Google tag (gtag.js) - Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
    </script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Header -->
    <header role="banner">
        <nav role="navigation" aria-label="Main navigation">
            <a href="homepage.html" class="logo" aria-label="Modern Dental Care - Home">Modern Dental Care</a>
            <div class="nav-buttons">
                <button class="risk-button" onclick="openRiskCalculator()" aria-label="Calculate your gum disease risk">
                    <span aria-hidden="true">🔍</span> Calculate Your Risk
                </button>
                <a href="#evaluation" class="cta-button">Free Periodontal Evaluation</a>
            </div>
        </nav>
    </header>
    
    <!-- Hero Section -->
    <section class="hero" role="banner">
        <h1>Advanced Gum Disease Treatment</h1>
        <p>Restore your gum health and protect your smile with expert periodontal care</p>
        <div class="hero-buttons">
            <a href="#checker" class="cta-button">Check Your Gum Health</a>
            <a href="#visualizer" class="cta-button" style="background: var(--accent-teal);">See Disease Progression</a>
        </div>
    </section>
    
    <main id="main-content" role="main">
        <!-- Gum Disease Progression Visualizer -->
        <section id="visualizer" class="progression-visualizer content-section">
            <div class="visualizer-container">
                <h2 class="section-title">Interactive Gum Disease Progression Visualizer</h2>
                <p style="text-align: center; margin-bottom: 2rem;">Click each stage to see how gum disease progresses</p>
                
                <div class="progression-stages" role="tablist" aria-label="Gum disease progression stages">
                    <div class="progression-line" aria-hidden="true"></div>
                    <button class="stage-marker active" role="tab" aria-selected="true" aria-controls="stage-healthy" onclick="showStage('healthy')" title="Healthy Gums">
                        <span aria-hidden="true">😊</span>
                        <span class="visually-hidden">Healthy gums stage</span>
                    </button>
                    <button class="stage-marker" role="tab" aria-selected="false" aria-controls="stage-gingivitis" onclick="showStage('gingivitis')" title="Gingivitis">
                        <span aria-hidden="true">😐</span>
                        <span class="visually-hidden">Gingivitis stage</span>
                    </button>
                    <button class="stage-marker" role="tab" aria-selected="false" aria-controls="stage-periodontitis" onclick="showStage('periodontitis')" title="Periodontitis">
                        <span aria-hidden="true">😟</span>
                        <span class="visually-hidden">Periodontitis stage</span>
                    </button>
                    <button class="stage-marker" role="tab" aria-selected="false" aria-controls="stage-advanced" onclick="showStage('advanced')" title="Advanced">
                        <span aria-hidden="true">😫</span>
                        <span class="visually-hidden">Advanced stage</span>
                    </button>
                </div>
                
                <div id="stage-healthy" class="stage-info active" role="tabpanel" aria-labelledby="stage-healthy-tab">
                    <div class="stage-content">
                        <div class="stage-visual" role="img" aria-label="Healthy gums visual representation">
                            [Healthy Gums Visual]
                        </div>
                        <div>
                            <h3 style="color: var(--success-green);">Healthy Gums</h3>
                            <p><strong>Characteristics:</strong></p>
                            <ul>
                                <li>Pink, firm gum tissue</li>
                                <li>No bleeding when brushing</li>
                                <li>Tight seal around teeth</li>
                                <li>No bad breath</li>
                            </ul>
                            <p><strong>Prevention Focus:</strong> Regular cleanings every 6 months, daily flossing, proper brushing technique</p>
                            <button class="cta-button" style="margin-top: 1rem;" onclick="showPreventionTips()">Learn Prevention Tips</button>
                        </div>
                    </div>
                </div>
                
                <div id="stage-gingivitis" class="stage-info" role="tabpanel" aria-labelledby="stage-gingivitis-tab">
                    <div class="stage-content">
                        <div class="stage-visual" role="img" aria-label="Gingivitis visual representation">
                            [Gingivitis Visual]
                        </div>
                        <div>
                            <h3 style="color: var(--warning-yellow);">Gingivitis - Early Stage</h3>
                            <p><strong>Warning Signs:</strong></p>
                            <ul>
                                <li>Red, swollen gums</li>
                                <li>Bleeding when brushing/flossing</li>
                                <li>Mild bad breath</li>
                                <li>Tender gum tissue</li>
                            </ul>
                            <p><strong>Good News:</strong> Completely reversible with professional cleaning and improved home care!</p>
                            <button class="cta-button" style="margin-top: 1rem;" onclick="scheduleEvaluation()">Book Cleaning Now</button>
                        </div>
                    </div>
                </div>
                
                <div id="stage-periodontitis" class="stage-info" role="tabpanel" aria-labelledby="stage-periodontitis-tab">
                    <div class="stage-content">
                        <div class="stage-visual" role="img" aria-label="Periodontitis visual representation">
                            [Periodontitis Visual]
                        </div>
                        <div>
                            <h3 style="color: var(--warning-red);">Periodontitis - Moderate Stage</h3>
                            <p><strong>Serious Symptoms:</strong></p>
                            <ul>
                                <li>Gum recession (teeth look longer)</li>
                                <li>Deep pockets forming</li>
                                <li>Persistent bad breath</li>
                                <li>Possible tooth sensitivity</li>
                                <li>Bone loss beginning</li>
                            </ul>
                            <p><strong>Treatment Required:</strong> Deep cleaning (scaling & root planing) plus maintenance program</p>
                            <button class="cta-button" style="margin-top: 1rem;" onclick="scheduleEvaluation()">Get Treatment Plan</button>
                        </div>
                    </div>
                </div>
                
                <div id="stage-advanced" class="stage-info" role="tabpanel" aria-labelledby="stage-advanced-tab">
                    <div class="stage-content">
                        <div class="stage-visual" role="img" aria-label="Advanced periodontitis visual representation">
                            [Advanced Periodontitis Visual]
                        </div>
                        <div>
                            <h3 style="color: var(--info-purple);">Advanced Periodontitis - Severe Stage</h3>
                            <p><strong>Critical Symptoms:</strong></p>
                            <ul>
                                <li>Severe gum recession</li>
                                <li>Loose or shifting teeth</li>
                                <li>Painful chewing</li>
                                <li>Tooth loss risk</li>
                                <li>Significant bone loss</li>
                            </ul>
                            <p><strong>Urgent Care Needed:</strong> Surgical intervention may be required to save teeth</p>
                            <button class="cta-button" style="margin-top: 1rem; background: var(--warning-red);" onclick="scheduleEvaluation()">Schedule Emergency Consult</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Enhanced Warning Signs Checker -->
        <section id="checker" class="warning-checker content-section">
            <div class="checker-container">
                <h2 class="section-title">Comprehensive Gum Health Assessment</h2>
                <p style="text-align: center; margin-bottom: 2rem;">Select any symptoms you're experiencing in each category:</p>
                
                <form id="symptom-form" aria-label="Gum health symptom checker">
                    <div class="symptom-categories">
                        <fieldset class="symptom-category">
                            <legend class="category-header">
                                <span class="category-icon" aria-hidden="true">🩸</span>
                                <h3>Bleeding & Inflammation</h3>
                            </legend>
                            <div class="symptom-list">
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="bleeding" value="3" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Bleeding when brushing</span>
                                </label>
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="bleeding" value="3" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Bleeding when flossing</span>
                                </label>
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="inflammation" value="2" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Red or purple gums</span>
                                </label>
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="inflammation" value="2" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Swollen gum tissue</span>
                                </label>
                            </div>
                        </fieldset>
                        
                        <fieldset class="symptom-category">
                            <legend class="category-header">
                                <span class="category-icon" aria-hidden="true">📏</span>
                                <h3>Structural Changes</h3>
                            </legend>
                            <div class="symptom-list">
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="structural" value="4" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Receding gums</span>
                                </label>
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="structural" value="5" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Loose teeth</span>
                                </label>
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="structural" value="4" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Teeth look longer</span>
                                </label>
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="structural" value="3" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Gaps between teeth</span>
                                </label>
                            </div>
                        </fieldset>
                        
                        <fieldset class="symptom-category">
                            <legend class="category-header">
                                <span class="category-icon" aria-hidden="true">💨</span>
                                <h3>Other Symptoms</h3>
                            </legend>
                            <div class="symptom-list">
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="other" value="3" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Persistent bad breath</span>
                                </label>
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="other" value="2" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Bad taste in mouth</span>
                                </label>
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="other" value="3" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Painful chewing</span>
                                </label>
                                <label class="symptom-item" tabindex="0">
                                    <input type="checkbox" name="other" value="4" class="visually-hidden">
                                    <div class="symptom-checkbox" aria-hidden="true"></div>
                                    <span>Pus between teeth</span>
                                </label>
                            </div>
                        </fieldset>
                    </div>
                    
                    <div class="symptom-results">
                        <button type="submit" class="cta-button">Analyze My Risk Level</button>
                        
                        <div id="risk-results" class="results-display" role="region" aria-live="polite" aria-label="Risk assessment results">
                            <div class="risk-meter">
                                <div id="risk-fill" class="risk-fill" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
                            </div>
                            <div id="risk-level" class="risk-level"></div>
                            <p id="risk-message"></p>
                            <div id="risk-recommendations" style="margin-top: 1.5rem;"></div>
                            <a href="#evaluation" class="cta-button" style="margin-top: 1rem;">Schedule Free Evaluation</a>
                        </div>
                    </div>
                </form>
            </div>
        </section>
        
        <!-- Treatment Comparison Tool -->
        <section class="treatment-comparison content-section">
            <div class="comparison-container">
                <h2 class="section-title">Compare Treatment Options</h2>
                <p style="text-align: center; margin-bottom: 2rem;">Select your condition to see recommended treatments:</p>
                
                <div class="comparison-selector" role="tablist" aria-label="Treatment condition options">
                    <button class="comparison-option active" role="tab" aria-selected="true" onclick="showTreatments('all')">All Options</button>
                    <button class="comparison-option" role="tab" aria-selected="false" onclick="showTreatments('gingivitis')">Gingivitis</button>
                    <button class="comparison-option" role="tab" aria-selected="false" onclick="showTreatments('moderate')">Moderate Gum Disease</button>
                    <button class="comparison-option" role="tab" aria-selected="false" onclick="showTreatments('severe')">Severe Gum Disease</button>
                </div>
                
                <div class="treatment-cards" id="treatment-cards" role="tabpanel" aria-label="Treatment options">
                    <article class="treatment-card" data-condition="gingivitis">
                        <header class="treatment-header gingivitis-header">
                            <h3>Professional Cleaning</h3>
                            <p>For Gingivitis</p>
                        </header>
                        <div class="treatment-content">
                            <h4>What's Included:</h4>
                            <ul class="treatment-list">
                                <li>Plaque and tartar removal</li>
                                <li>Polishing of teeth</li>
                                <li>Fluoride treatment</li>
                                <li>Personalized hygiene plan</li>
                                <li>3-month follow-up</li>
                            </ul>
                            <div class="treatment-cost">
                                <strong>Investment:</strong> $150-250<br>
                                <small>Most insurance covers 2x yearly</small>
                            </div>
                            <h4 style="margin-top: 1.5rem;">Success Rate:</h4>
                            <p>95% reversal with good home care</p>
                        </div>
                    </article>
                    
                    <article class="treatment-card recommended" data-condition="moderate">
                        <span class="recommended-badge">MOST COMMON</span>
                        <header class="treatment-header periodontitis-header">
                            <h3>Deep Cleaning (SRP)</h3>
                            <p>For Periodontitis</p>
                        </header>
                        <div class="treatment-content">
                            <h4>What's Included:</h4>
                            <ul class="treatment-list">
                                <li>Scaling below gum line</li>
                                <li>Root planing (smoothing)</li>
                                <li>Local anesthetic</li>
                                <li>Antibiotic therapy</li>
                                <li>Laser treatment option</li>
                                <li>Maintenance program</li>
                            </ul>
                            <div class="treatment-cost">
                                <strong>Investment:</strong> $800-1,500<br>
                                <small>Often covered by insurance</small>
                            </div>
                            <h4 style="margin-top: 1.5rem;">Success Rate:</h4>
                            <p>85% improvement with maintenance</p>
                        </div>
                    </article>
                    
                    <article class="treatment-card" data-condition="severe">
                        <header class="treatment-header advanced-header">
                            <h3>Surgical Treatment</h3>
                            <p>For Advanced Cases</p>
                        </header>
                        <div class="treatment-content">
                            <h4>Options Include:</h4>
                            <ul class="treatment-list">
                                <li>Pocket reduction surgery</li>
                                <li>Bone grafting</li>
                                <li>Tissue regeneration</li>
                                <li>Gum grafting</li>
                                <li>Dental implants if needed</li>
                                <li>Intensive maintenance</li>
                            </ul>
                            <div class="treatment-cost">
                                <strong>Investment:</strong> $3,000-10,000<br>
                                <small>Payment plans available</small>
                            </div>
                            <h4 style="margin-top: 1.5rem;">Success Rate:</h4>
                            <p>70-90% depending on severity</p>
                        </div>
                    </article>
                </div>
            </div>
        </section>
    </main>
    
    <!-- CTA Section -->
    <section id="evaluation" class="cta-section">
        <h2>Take Control of Your Gum Health Today</h2>
        <p>Free periodontal evaluation includes pocket measurements and personalized treatment plan</p>
        <a href="#" class="cta-button-large" onclick="scheduleEvaluation()">Schedule Your Free Evaluation</a>
        <p style="margin-top: 1rem; font-size: 1rem;">Or call us at <a href="tel:+1234567890" style="color: inherit; text-decoration: underline;">(123) 456-7890</a></p>
    </section>
    
    <!-- Footer -->
    <footer role="contentinfo">
        <p>&copy; 2024 Modern Dental Care. Expert periodontal care for healthier gums and overall wellness.</p>
        <p>State-of-the-art technology meets compassionate care</p>
    </footer>
    
    <!-- Floating Assessment Button -->
    <button class="floating-assessment" id="floatingAssessment" onclick="openRiskCalculator()" aria-label="Open risk calculator">
        <span aria-hidden="true">🔍</span>
    </button>
    
    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModals()" aria-hidden="true"></div>
    
    <!-- Risk Calculator Modal -->
    <div class="risk-calculator-modal" id="riskCalculator" role="dialog" aria-labelledby="calculator-title" aria-modal="true">
        <div class="calculator-header">
            <h2 id="calculator-title">Comprehensive Gum Disease Risk Calculator</h2>
            <p>Answer these questions to determine your risk level</p>
        </div>
        
        <form id="calculator-questions" aria-label="Risk assessment questionnaire">
            <div class="risk-factors">
                <fieldset class="risk-factor">
                    <legend>1. Age Group</legend>
                    <div class="risk-options" role="radiogroup" aria-labelledby="age-legend">
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="age" value="1" class="visually-hidden">
                            Under 30
                        </label>
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="age" value="2" class="visually-hidden">
                            30-50
                        </label>
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="age" value="3" class="visually-hidden">
                            Over 50
                        </label>
                    </div>
                </fieldset>
                
                <fieldset class="risk-factor">
                    <legend>2. Smoking Status</legend>
                    <div class="risk-options" role="radiogroup" aria-labelledby="smoking-legend">
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="smoking" value="0" class="visually-hidden">
                            Never
                        </label>
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="smoking" value="2" class="visually-hidden">
                            Former
                        </label>
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="smoking" value="5" class="visually-hidden">
                            Current
                        </label>
                    </div>
                </fieldset>
                
                <fieldset class="risk-factor">
                    <legend>3. Family History</legend>
                    <div class="risk-options" role="radiogroup" aria-labelledby="family-legend">
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="family" value="0" class="visually-hidden">
                            No
                        </label>
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="family" value="3" class="visually-hidden">
                            Yes
                        </label>
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="family" value="1" class="visually-hidden">
                            Unknown
                        </label>
                    </div>
                </fieldset>
                
                <fieldset class="risk-factor">
                    <legend>4. Diabetes Status</legend>
                    <div class="risk-options" role="radiogroup" aria-labelledby="diabetes-legend">
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="diabetes" value="0" class="visually-hidden">
                            No
                        </label>
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="diabetes" value="2" class="visually-hidden">
                            Pre-diabetic
                        </label>
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="diabetes" value="4" class="visually-hidden">
                            Diabetic
                        </label>
                    </div>
                </fieldset>
                
                <fieldset class="risk-factor">
                    <legend>5. Last Dental Cleaning</legend>
                    <div class="risk-options" role="radiogroup" aria-labelledby="cleaning-legend">
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="cleaning" value="0" class="visually-hidden">
                            &lt; 6 months
                        </label>
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="cleaning" value="2" class="visually-hidden">
                            6-12 months
                        </label>
                        <label class="risk-option" tabindex="0">
                            <input type="radio" name="cleaning" value="4" class="visually-hidden">
                            &gt; 1 year
                        </label>
                    </div>
                </fieldset>
            </div>
            
            <button type="submit" class="cta-button" style="width: 100%; margin-top: 2rem;">Calculate My Risk Score</button>
        </form>
        
        <div id="calculator-result" class="calculator-result" role="region" aria-live="polite"></div>
        
        <button class="cta-button" onclick="closeRiskCalculator()" style="background: var(--charcoal); margin-top: 1rem;">Close</button>
    </div>
    
    <script>
        // Performance optimized JavaScript with accessibility enhancements
        
        // GA4 Event Tracking Helper
        function trackEvent(eventName, parameters = {}) {
            if (typeof gtag !== 'undefined') {
                gtag('event', eventName, {
                    'page_name': 'gum_disease_treatment',
                    ...parameters
                });
            }
        }
        
        // API Configuration
        const API_CONFIG = {
            evaluation: '/api/book-evaluation',
            symptomCheck: '/api/symptom-check',
            riskAssessment: '/api/risk-assessment',
            timeout: 10000
        };
        
        // Loading State Manager
        class LoadingStateManager {
            static setLoading(element, isLoading, loadingText = 'Loading...') {
                if (isLoading) {
                    element.dataset.originalText = element.textContent;
                    element.textContent = loadingText;
                    element.disabled = true;
                    element.classList.add('loading');
                    element.style.opacity = '0.6';
                    element.style.cursor = 'not-allowed';
                } else {
                    element.textContent = element.dataset.originalText || element.textContent;
                    element.disabled = false;
                    element.classList.remove('loading');
                    element.style.opacity = '';
                    element.style.cursor = '';
                }
            }
        }
        
        // Notification System
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#28A745' : type === 'error' ? '#DC3545' : '#0077BE'};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.2);
                z-index: 10000;
                max-width: 90%;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }
        
        // Symptom tracking with proper form handling
        const symptomForm = document.getElementById('symptom-form');
        let symptomScores = {};
        
        // Risk calculator answers
        const calculatorForm = document.getElementById('calculator-questions');
        let riskAnswers = {};
        
        // Add event listeners for forms
        if (symptomForm) {
            symptomForm.addEventListener('change', handleSymptomChange);
            symptomForm.addEventListener('submit', calculateRisk);
        }
        if (calculatorForm) {
            calculatorForm.addEventListener('change', handleRiskFormChange);
            calculatorForm.addEventListener('submit', calculateRiskScore);
        }
        
        // Symptom form handling
        function handleSymptomChange(event) {
            if (event.target.type === 'checkbox') {
                const item = event.target.closest('.symptom-item');
                const checkbox = item.querySelector('.symptom-checkbox');
                const symptomText = event.target.nextElementSibling.nextElementSibling.textContent.trim();
                const score = parseInt(event.target.value);
                
                if (event.target.checked) {
                    item.classList.add('selected');
                    checkbox.innerHTML = '✓';
                    symptomScores[symptomText] = score;
                    announceToScreenReader(`Selected: ${symptomText}`);
                } else {
                    item.classList.remove('selected');
                    checkbox.innerHTML = '';
                    delete symptomScores[symptomText];
                    announceToScreenReader(`Deselected: ${symptomText}`);
                }
            }
        }
        
        async function calculateRisk(event) {
            event.preventDefault();
            
            const button = event.target.querySelector('button[type="submit"]');
            LoadingStateManager.setLoading(button, true, 'Calculating...');
            
            const totalScore = Object.values(symptomScores).reduce((a, b) => a + b, 0);
            const maxScore = 50;
            const percentage = Math.min((totalScore / maxScore) * 100, 100);
            
            // Track symptom check
            trackEvent('symptom_check_completed', {
                symptom_count: Object.keys(symptomScores).length,
                risk_percentage: percentage
            });
            
            try {
                // Simulate API call
                if (API_CONFIG.symptomCheck) {
                    await fetch(API_CONFIG.symptomCheck, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ symptoms: symptomScores, percentage })
                    }).catch(() => {}); // Graceful fail
                }
            
            // Show results
            const resultsDiv = document.getElementById('risk-results');
            resultsDiv.style.display = 'block';
            resultsDiv.focus();
            
            // Animate risk meter
            setTimeout(() => {
                const fillElement = document.getElementById('risk-fill');
                fillElement.style.width = percentage + '%';
                fillElement.setAttribute('aria-valuenow', percentage);
            }, 100);
            
            // Determine risk level
            let riskLevel, riskMessage, riskClass, recommendations;
            
            if (percentage < 20) {
                riskLevel = 'Low Risk';
                riskClass = 'risk-low';
                riskMessage = 'Your gums appear healthy! Keep up with regular cleanings to maintain optimal health.';
                recommendations = [
                    'Continue regular 6-month cleanings',
                    'Maintain excellent home care routine',
                    'Consider preventive treatments'
                ];
            } else if (percentage < 50) {
                riskLevel = 'Moderate Risk';
                riskClass = 'risk-moderate';
                riskMessage = 'You\'re showing early signs of gum disease. Prompt treatment can reverse these symptoms.';
                recommendations = [
                    'Schedule evaluation within 2 weeks',
                    'Increase cleaning frequency to 3-4 months',
                    'Improve flossing technique',
                    'Consider antimicrobial rinse'
                ];
            } else {
                riskLevel = 'High Risk';
                riskClass = 'risk-high';
                riskMessage = 'Multiple warning signs detected. Immediate professional evaluation is strongly recommended.';
                recommendations = [
                    'Schedule urgent evaluation this week',
                    'Likely need deep cleaning treatment',
                    'May require specialized periodontal care',
                    'Risk of tooth loss without treatment'
                ];
            }
            
            document.getElementById('risk-level').textContent = riskLevel;
            document.getElementById('risk-level').className = 'risk-level ' + riskClass;
            document.getElementById('risk-message').textContent = riskMessage;
            
            const recDiv = document.getElementById('risk-recommendations');
            recDiv.innerHTML = '<h4>Recommendations:</h4><ul>' + 
                recommendations.map(rec => `<li>${rec}</li>`).join('') + 
                '</ul>';
            
            announceToScreenReader(`Risk assessment complete. ${riskLevel}. ${riskMessage}`);
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            } catch (error) {
                console.error('Risk calculation error:', error);
            } finally {
                LoadingStateManager.setLoading(button, false);
            }
        }
        
        // Stage visualization with accessibility
        function showStage(stage) {
            const markers = document.querySelectorAll('.stage-marker');
            const infos = document.querySelectorAll('.stage-info');
            
            // Update markers
            markers.forEach(marker => {
                marker.classList.remove('active');
                marker.setAttribute('aria-selected', 'false');
            });
            
            const activeMarker = event.target;
            activeMarker.classList.add('active');
            activeMarker.setAttribute('aria-selected', 'true');
            
            // Update content
            infos.forEach(info => {
                info.classList.remove('active');
            });
            
            const activeInfo = document.getElementById(`stage-${stage}`);
            activeInfo.classList.add('active');
            
            announceToScreenReader(`Now viewing ${stage} stage information`);
        }
        
        // Risk calculator functions
        function openRiskCalculator() {
            const modal = document.getElementById('riskCalculator');
            const overlay = document.getElementById('modalOverlay');
            
            modal.style.display = 'block';
            overlay.classList.add('active');
            overlay.setAttribute('aria-hidden', 'false');
            
            // Focus first form element
            const firstInput = modal.querySelector('input[type="radio"]');
            if (firstInput) firstInput.focus();
            
            // Prevent body scroll
            document.body.style.overflow = 'hidden';
            
            announceToScreenReader('Risk calculator opened. Please answer all questions to get your risk score.');
        }
        
        function closeRiskCalculator() {
            const modal = document.getElementById('riskCalculator');
            const overlay = document.getElementById('modalOverlay');
            
            modal.style.display = 'none';
            overlay.classList.remove('active');
            overlay.setAttribute('aria-hidden', 'true');
            
            // Restore body scroll
            document.body.style.overflow = '';
            
            // Reset form
            riskAnswers = {};
            calculatorForm.reset();
            calculatorForm.style.display = 'block';
            document.getElementById('calculator-result').style.display = 'none';
            
            // Return focus to trigger button
            document.querySelector('.risk-button').focus();
        }
        
        function closeModals() {
            closeRiskCalculator();
        }
        
        // Risk form handling
        function handleRiskFormChange(event) {
            if (event.target.type === 'radio') {
                const fieldset = event.target.closest('fieldset');
                const options = fieldset.querySelectorAll('.risk-option');
                const selectedOption = event.target.closest('.risk-option');
                
                // Update visual selection
                options.forEach(opt => opt.classList.remove('selected'));
                selectedOption.classList.add('selected');
                
                // Store answer
                const category = event.target.name;
                const score = parseInt(event.target.value);
                riskAnswers[category] = score;
                
                announceToScreenReader(`Selected ${selectedOption.textContent.trim()} for ${fieldset.querySelector('legend').textContent}`);
            }
        }
        
        async function calculateRiskScore(event) {
            event.preventDefault();
            
            const button = event.target.querySelector('button[type="submit"]');
            if (button) LoadingStateManager.setLoading(button, true, 'Analyzing...');
            
            if (Object.keys(riskAnswers).length < 5) {
                announceToScreenReader('Please answer all questions to get your risk score.');
                
                // Focus first unanswered question
                const unansweredFieldset = Array.from(calculatorForm.querySelectorAll('fieldset')).find(fieldset => {
                    const name = fieldset.querySelector('input').name;
                    return !riskAnswers.hasOwnProperty(name);
                });
                
                if (unansweredFieldset) {
                    unansweredFieldset.querySelector('input').focus();
                }
                return;
            }
            
            const totalScore = Object.values(riskAnswers).reduce((a, b) => a + b, 0);
            const maxScore = 19;
            const percentage = (totalScore / maxScore) * 100;
            
            // Hide questions, show result
            calculatorForm.style.display = 'none';
            const resultDiv = document.getElementById('calculator-result');
            resultDiv.style.display = 'block';
            resultDiv.focus();
            
            let riskCategory, color, message;
            
            if (percentage < 30) {
                riskCategory = 'LOW RISK';
                color = 'var(--success-green)';
                resultDiv.style.background = 'var(--light-green)';
                message = 'Great news! Your risk factors are minimal. Regular preventive care will keep your gums healthy.';
            } else if (percentage < 60) {
                riskCategory = 'MODERATE RISK';
                color = 'var(--warning-yellow)';
                resultDiv.style.background = '#FFF3CD';
                message = 'You have some risk factors that need attention. A professional evaluation is recommended soon.';
            } else {
                riskCategory = 'HIGH RISK';
                color = 'var(--warning-red)';
                resultDiv.style.background = 'var(--light-red)';
                message = 'Multiple risk factors detected. Immediate professional care is essential to prevent serious complications.';
            }
            
            resultDiv.innerHTML = `
                <div class="risk-score-display" style="color: ${color};">${Math.round(percentage)}%</div>
                <h3 style="color: ${color};">${riskCategory}</h3>
                <p>${message}</p>
                <h4 style="margin-top: 2rem;">Your Risk Factors:</h4>
                <ul style="text-align: left; max-width: 400px; margin: 1rem auto;">
                    ${riskAnswers.age >= 2 ? '<li>Age-related increased risk</li>' : ''}
                    ${riskAnswers.smoking >= 2 ? '<li>Tobacco use significantly increases risk</li>' : ''}
                    ${riskAnswers.family >= 2 ? '<li>Genetic predisposition</li>' : ''}
                    ${riskAnswers.diabetes >= 2 ? '<li>Diabetes affects gum health</li>' : ''}
                    ${riskAnswers.cleaning >= 2 ? '<li>Overdue for professional cleaning</li>' : ''}
                </ul>
                <a href="#evaluation" class="cta-button" style="margin-top: 1rem;" onclick="closeRiskCalculator()">Get Professional Evaluation</a>
            `;
            
            announceToScreenReader(`Risk calculation complete. You have ${riskCategory.toLowerCase()}. ${message}`);
            
            // Track risk assessment completion
            trackEvent('risk_assessment_completed', {
                risk_level: riskCategory,
                risk_score: Math.round(percentage)
            });
            
            // Send to API
            try {
                if (API_CONFIG.riskAssessment) {
                    await fetch(API_CONFIG.riskAssessment, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            answers: riskAnswers,
                            riskLevel: riskCategory,
                            score: Math.round(percentage)
                        })
                    }).catch(() => {});
                }
            } catch (error) {
                console.error('Risk assessment API error:', error);
            } finally {
                if (button) LoadingStateManager.setLoading(button, false);
            }
        }
        
        // Treatment comparison
        function showTreatments(condition) {
            const buttons = document.querySelectorAll('.comparison-option');
            const cards = document.querySelectorAll('.treatment-card');
            
            // Update active button
            buttons.forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-selected', 'false');
            });
            
            const activeButton = event.target;
            activeButton.classList.add('active');
            activeButton.setAttribute('aria-selected', 'true');
            
            // Show/hide cards
            let visibleCount = 0;
            cards.forEach(card => {
                if (condition === 'all' || card.dataset.condition === condition) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            announceToScreenReader(`Showing ${visibleCount} treatment options for ${condition === 'all' ? 'all conditions' : condition}`);
        }
        
        // Utility Functions
        async function scheduleEvaluation() {
            const button = event.target;
            LoadingStateManager.setLoading(button, true, 'Scheduling...');
            
            trackEvent('evaluation_request', {
                source: 'gum_disease_page',
                action: 'schedule_evaluation'
            });
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                if (API_CONFIG.evaluation) {
                    await fetch(API_CONFIG.evaluation, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            service: 'gum_disease_evaluation',
                            timestamp: new Date().toISOString()
                        })
                    }).catch(() => {});
                }
                
                showNotification('Thank you! Our periodontal team will contact you within 24 hours.', 'success');
                announceToScreenReader('Thank you for taking the first step! Our periodontal team will contact you within 24 hours to schedule your free evaluation.');
            } catch (error) {
                showNotification('Something went wrong. Please call us at 1-800-SMILE-NOW.', 'error');
            } finally {
                LoadingStateManager.setLoading(button, false);
            }
        }
        
        function showPreventionTips() {
            announceToScreenReader('Opening prevention tips. In a real implementation, this would show detailed oral hygiene instructions.');
        }
        
        // Screen reader announcements
        function announceToScreenReader(message) {
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.classList.add('visually-hidden');
            announcement.textContent = message;
            
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                if (document.body.contains(announcement)) {
                    document.body.removeChild(announcement);
                }
            }, 1000);
        }
        
        // Floating assessment button with performance optimization
        let hasScrolled = false;
        let scrollTimeout;
        
        function handleScroll() {
            if (scrollTimeout) {
                clearTimeout(scrollTimeout);
            }
            
            scrollTimeout = setTimeout(() => {
                const scrolled = window.pageYOffset;
                const height = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercentage = (scrolled / height) * 100;
                
                const floatingButton = document.getElementById('floatingAssessment');
                
                if (scrollPercentage > 50 && !hasScrolled) {
                    hasScrolled = true;
                    floatingButton.style.display = 'flex';
                    announceToScreenReader('Risk assessment tool now available at bottom right of page.');
                }
            }, 100);
        }
        
        // Intersection Observer for lazy loading
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '50px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('loaded');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);
        
        // Keyboard navigation support
        function handleKeyDown(event) {
            // Modal keyboard navigation
            const modal = document.getElementById('riskCalculator');
            if (modal && modal.style.display === 'block') {
                if (event.key === 'Escape') {
                    closeRiskCalculator();
                    event.preventDefault();
                }
                
                // Tab trap for accessibility
                if (event.key === 'Tab') {
                    const focusableElements = modal.querySelectorAll(
                        'button, input, select, textarea, a[href], [tabindex]:not([tabindex="-1"])'
                    );
                    const firstElement = focusableElements[0];
                    const lastElement = focusableElements[focusableElements.length - 1];
                    
                    if (event.shiftKey && document.activeElement === firstElement) {
                        lastElement.focus();
                        event.preventDefault();
                    } else if (!event.shiftKey && document.activeElement === lastElement) {
                        firstElement.focus();
                        event.preventDefault();
                    }
                }
            }
        }
        
        // Mobile functionality enhancements
        function enhanceMobileExperience() {
            const isMobile = window.matchMedia('(max-width: 768px)').matches;
            
            if (isMobile) {
                // Improve touch targets
                document.querySelectorAll('button, .cta-button, .risk-button').forEach(btn => {
                    const height = btn.offsetHeight;
                    if (height < 44) {
                        btn.style.minHeight = '44px';
                        btn.style.padding = '12px 16px';
                    }
                });
                
                // Add touch feedback
                document.addEventListener('touchstart', function(e) {
                    if (e.target.matches('button, .cta-button, .risk-button, .symptom-item, .risk-option')) {
                        e.target.style.transform = 'scale(0.95)';
                    }
                });
                
                document.addEventListener('touchend', function(e) {
                    if (e.target.matches('button, .cta-button, .risk-button, .symptom-item, .risk-option')) {
                        setTimeout(() => {
                            e.target.style.transform = '';
                        }, 100);
                    }
                });
            }
        }
        
        // Initialize performance optimizations
        document.addEventListener('DOMContentLoaded', function() {
            // Track page view
            trackEvent('page_view', {
                page_title: 'Gum Disease Treatment',
                page_location: window.location.href
            });
            // Observe content sections for lazy loading
            document.querySelectorAll('.content-section').forEach(section => {
                observer.observe(section);
            });
            
            // Add optimized scroll listener
            window.addEventListener('scroll', handleScroll, { passive: true });
            
            // Add keyboard navigation
            document.addEventListener('keydown', handleKeyDown);
            
            // Preload critical resources
            const criticalImages = document.querySelectorAll('img[data-critical]');
            criticalImages.forEach(img => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.as = 'image';
                link.href = img.dataset.src || img.src;
                document.head.appendChild(link);
            });
            
            // Set initial ARIA states
            document.querySelectorAll('[role="tab"]').forEach((tab, index) => {
                if (index === 0) {
                    tab.setAttribute('tabindex', '0');
                } else {
                    tab.setAttribute('tabindex', '-1');
                }
            });
            
            // Enhance mobile experience
            enhanceMobileExperience();
            
            // Track CTA button clicks
            document.querySelectorAll('.cta-button, .risk-button').forEach(button => {
                button.addEventListener('click', function() {
                    const buttonText = this.textContent.trim();
                    trackEvent('cta_click', {
                        button_text: buttonText,
                        button_location: this.closest('section')?.className || 'header'
                    });
                });
            });
            
            // Add CSS for animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
                .loading { 
                    position: relative;
                    color: transparent !important;
                }
                .loading::after {
                    content: '';
                    position: absolute;
                    width: 16px;
                    height: 16px;
                    margin: auto;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    border: 2px solid transparent;
                    border-top-color: currentColor;
                    border-radius: 50%;
                    animation: spin 0.8s linear infinite;
                }
                @keyframes spin {
                    to { transform: rotate(360deg); }
                }
            `;
            document.head.appendChild(style);
        });
        
        // Service Worker registration for offline support (in production)
        if ('serviceWorker' in navigator && location.protocol === 'https:') {
            navigator.serviceWorker.register('/sw.js').catch(console.error);
        }
        
        // Error boundary for graceful degradation
        window.addEventListener('error', function(event) {
            console.error('JavaScript error:', event.error);
            announceToScreenReader('An error occurred. Please refresh the page or contact us directly.');
        });
        
        // Performance monitoring
        if ('performance' in window) {
            window.addEventListener('load', function() {
                setTimeout(() => {
                    const perfData = performance.getEntriesByType('navigation')[0];
                    if (perfData && perfData.loadEventEnd > 3000) {
                        console.warn('Page load time is slow:', perfData.loadEventEnd);
                    }
                }, 0);
            });
        }
    </script>
    
    <!-- Contact Form Section -->
    <section class="contact-section" style="padding: 4rem 0; background: var(--soft-gray); margin-top: 3rem;">
        <div class="container">
            <h2 style="text-align: center; margin-bottom: 1rem;">Schedule Your Free Gum Health Evaluation</h2>
            <p style="text-align: center; color: #666; margin-bottom: 2rem;">Take the first step towards healthier gums. Our specialists are ready to help.</p>
            
            <form id="evaluationForm" style="max-width: 600px; margin: 0 auto; background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1);">
                <div style="display: grid; gap: 1rem;">
                    <div>
                        <label for="fullName" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Full Name *</label>
                        <input type="text" id="fullName" name="fullName" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div>
                            <label for="email" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Email *</label>
                            <input type="email" id="email" name="email" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
                        </div>
                        <div>
                            <label for="phone" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Phone *</label>
                            <input type="tel" id="phone" name="phone" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
                        </div>
                    </div>
                    
                    <div>
                        <label for="symptoms" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Current Symptoms</label>
                        <select id="symptoms" name="symptoms" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
                            <option value="">Select primary concern</option>
                            <option value="bleeding">Bleeding gums</option>
                            <option value="recession">Gum recession</option>
                            <option value="pain">Gum pain/tenderness</option>
                            <option value="swelling">Swollen gums</option>
                            <option value="breath">Persistent bad breath</option>
                            <option value="prevention">Preventive care</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="message" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Additional Information</label>
                        <textarea id="message" name="message" rows="4" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; resize: vertical;"></textarea>
                    </div>
                    
                    <div id="formError" style="color: var(--warning-red); display: none; padding: 1rem; background: var(--light-red); border-radius: 8px;"></div>
                    <div id="formSuccess" style="color: var(--success-green); display: none; padding: 1rem; background: var(--light-green); border-radius: 8px;"></div>
                    
                    <button type="submit" class="cta-button" style="width: 100%; padding: 1rem; font-size: 1.1rem;">
                        Request Free Evaluation
                    </button>
                </div>
            </form>
        </div>
    </section>
    
    <script>
        // Form submission handler
        document.getElementById('evaluationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const button = e.target.querySelector('button[type="submit"]');
            const errorDiv = document.getElementById('formError');
            const successDiv = document.getElementById('formSuccess');
            
            // Reset messages
            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';
            
            // Validate form
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            if (!data.fullName || !data.email || !data.phone) {
                errorDiv.textContent = 'Please fill in all required fields.';
                errorDiv.style.display = 'block';
                return;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(data.email)) {
                errorDiv.textContent = 'Please enter a valid email address.';
                errorDiv.style.display = 'block';
                return;
            }
            
            // Phone validation
            const phoneRegex = /^[\d\s\-\(\)\+]+$/;
            if (!phoneRegex.test(data.phone) || data.phone.replace(/\D/g, '').length < 10) {
                errorDiv.textContent = 'Please enter a valid phone number.';
                errorDiv.style.display = 'block';
                return;
            }
            
            LoadingStateManager.setLoading(button, true, 'Submitting...');
            
            try {
                // Track form submission
                trackEvent('evaluation_form_submitted', {
                    symptom: data.symptoms || 'not_specified',
                    form_location: 'contact_section'
                });
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                if (API_CONFIG.evaluation) {
                    const response = await fetch(API_CONFIG.evaluation, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            ...data,
                            service: 'gum_disease_evaluation',
                            timestamp: new Date().toISOString()
                        })
                    });
                    
                    if (!response.ok) throw new Error('API request failed');
                }
                
                // Show success
                successDiv.innerHTML = '<strong>Thank you!</strong> We\'ve received your request and will contact you within 24 hours to schedule your free evaluation.';
                successDiv.style.display = 'block';
                
                // Reset form
                e.target.reset();
                
                // Track successful submission
                trackEvent('evaluation_form_success', {
                    symptom: data.symptoms || 'not_specified'
                });
                
                // Show notification
                showNotification('Request submitted successfully! We\'ll be in touch soon.', 'success');
                
            } catch (error) {
                console.error('Form submission error:', error);
                errorDiv.innerHTML = '<strong>Something went wrong.</strong> Please try again or call us directly at <a href="tel:1-800-SMILE-NOW" style="color: inherit; font-weight: bold;">1-800-SMILE-NOW</a>';
                errorDiv.style.display = 'block';
                
                trackEvent('evaluation_form_error', {
                    error_message: error.message
                });
            } finally {
                LoadingStateManager.setLoading(button, false);
            }
        });
        
        // Add input formatting for phone number
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 0) {
                if (value.length <= 3) {
                    value = `(${value}`;
                } else if (value.length <= 6) {
                    value = `(${value.slice(0, 3)}) ${value.slice(3)}`;
                } else {
                    value = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6, 10)}`;
                }
            }
            e.target.value = value;
        });
    </script>
</body>
</html>